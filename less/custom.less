// Core variables and mixins
@import "variables.less";
@import "bootstrap/less/grid.less";
@import "bootstrap/less/mixins/clearfix.less";
@import "bootstrap/less/mixins/grid.less";
@import "bootstrap/less/mixins/grid-framework.less";
@import "bootstrap/less/responsive-embed.less";
@import "mixins.less";

/*****************
 * Font formatting
 */
body.html {
  font-family: 'Rubik', arial, sans-serif;
  font-size: @font-size-base;
  font-style: normal;
  font-weight: 300;
  color: @slate;

  a {
    font-family: 'Rubik', arial, sans-serif;
    font-style: normal;
    font-weight: 400;
  }

  a:not(.btn) {
    color: @link-color;
  }

  b,
  strong,
  .bold,
  th {
    font-weight: 400;
  }

  .font-alt,
  form ul.token-input-list,
  div.token-input-dropdown {
    font-family: 'Rubik', arial, sans-serif;
  }

  .section-text,
  blockquote {
    color: @slate;
  }

  .section-text {
    font-size: (@font-size-base + 1px); // Larger than normal text
  }

  .bg-gray {
    background-color: @slate-10;
  }
}

body.html .bold-is-bold {
  b,
  strong,
  .bold {
    font-weight: bold;
  }
}

.cardinal,
.primary-colour {
  color: @cardinal;
}

.cardinal-background,
.primary-colour-background {
  background-color: @cardinal;
}

.city-blue,
.domain-christian .primary-colour {
  color: @city-blue;
}

.city-blue-background,
.domain-christian .primary-colour-background {
  background-color: @city-blue;
}

.midnight-blue {
  color: @midnight-blue;
}

.midnight-blue-background {
  background-color: @midnight-blue;
}

.slate {
  color: @slate;
}

.slate-background {
  background-color: @slate;
}

.sea-foam {
  color: @sea-foam;
}

.sea-foam-background {
  background-color: @sea-foam;
}

/**********************************************
 * Overcome Bootstrap formatting of h1, .h1 etc
 */
h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
  font-weight: 300 !important;
  letter-spacing: 1px;
}

/***********************
 * Format the Navigation
 */
.main-nav {
  .nav-logo-wrap {
    /*
     * Allow more room for the menu when the screen is 1025-1200px wide
     * At 1024px and below, Rhythm hides the menu
     */
    // Mobile
      margin-left: @grid-gutter-width;
    @media (min-width: 1025px) {
      margin-left: @grid-gutter-half-width;
    }
    @media (min-width: @screen-lg-min) {
      margin-left: @grid-gutter-width;
    }

    margin-right: 0;

    .logo {
      /*
       * This width gives a reasonable sized logo image and allows enough
       * room for the logo replacement text
       */
      max-width: 210px;
      /*
       * Centre the logo image vertically in the .main-nav
       */
      line-height: 1em;

      /*
       * Size the logo image
       */
      object[type="image/svg+xml"],
      img {
        width: 175px;
        max-height: 45px;
      }
    }
  }

  .inner-nav {
    ul.clearlist {
      > li {
        margin-left: 0; // Override any Bootstrap margins
      }

      ul.cbf2019-default-menu {
        /*
         * Float the menu to the left of the Search bar
         */
        float: left;
        padding: 0;

        > li {
          // Mobile
            margin-left: @main-nav-item-spacing;
          @media (min-width: @screen-lg-min) {
            margin-left: @main-nav-item-spacing-wide;
          }

          &:first-child {
            margin-left: 0;
          }

          /*
           * Set the menu text at the same level as Search bar text
           */
          height: 75px;
          line-height: 75px;
          -webkit-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
          -moz-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
          -o-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
          -ms-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
          transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
        }
      }

      .search-dropdown-list {
        // Mobile
          margin: 0 @main-nav-item-spacing;
        @media (min-width: @screen-lg-min) {
          margin: 0 @main-nav-item-spacing-wide;
        }
      }
    }
  }
}

.main-nav.small-height {
  .inner-nav {
    ul.clearlist ul.cbf2019-default-menu {
      > li {
        /*
         * Set the menu text at the same level as Search bar text
         * when the small-height menu is showing
         */
        height: 55px;
        line-height: 55px;
        -webkit-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
        -moz-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
        -o-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
        -ms-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
        transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
      }
    }
  }
}

.main-nav.mobile-on {
  .inner-nav {
    ul.clearlist ul.cbf2019-default-menu {
      /*
       * Unfloat the menu when the mobile menu is showing
       */
      float: none;

      > li {
        /*
         * Set the menu text at the same level as Search bar text
         */
        height: initial;
        line-height: initial;
      }
    }
  }
}

.main-nav.transparent.dark {
  background-image: linear-gradient(rgba(0,0,0,1),rgba(0,0,0,0.64),rgba(0,0,0,0.36), rgba(0,0,0,0.16), rgba(0,0,0,0.04), transparent) !important;
}

/*************************
 * Format the Title header
 */

.bg-dark-alfa-50 {
  text-shadow: 0 0 40px @midnight-blue-80;

  &::before {
    /*
     * When displayed over a white background, this background colour gives the theme's
     * 'Midnight blue 80%' which is rgb(63, 88, 96)
     */
    background: rgba(15, 46, 56, 0.8);
  }
}

.domain-christian .bg-dark-alfa-50 {
  text-shadow: 0 0 40px @city-blue-80;

  &::before {
    /*
     * When displayed over a white background, this background colour gives the theme's
     * 'City blue 80%' which is rgb(73, 176, 222)
     */
    background: rgba(28, 157, 214, 0.8);
  }
}

.domain-thirdspace .bg-dark-alfa-50 {
  text-shadow: 0 0 40px @slate;

  &::before {
    background: transparent;
  }
}

.mobile-nav {
  // Reproduce Rhythm formatting for .mobile-nav .fa
  text-align: center;

  i,
  .svg-inline--fa {
    // Fix vertical alignment issue for i element
    display: inline;

    // Reproduce Rhythm formatting for .mobile-nav .fa
    height: 100%;
    vertical-align: middle;
    font-size: 21px;
  }

  &.small-height {
    line-height: 55px !important; // Copy formatting of .small-height .inner-nav ul li a
    -webkit-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    -moz-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    -o-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    -ms-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
  }
}

.white .mobile-nav {
  i,
  .svg-inline--fa {
    // Reproduce Rhythm formatting for .white .mobile-nav .fa
    color: @slate;
  }
}

.mobile-on .mn-has-sub {
  > i,
  > .svg-inline--fa {
    // Reproduce Rhythm formatting for .mobile-on .mn-has-sub > .fa
    width: 18px;
    height: 18px;
    position: absolute;
    font-size: @font-size-base;
    line-height: 16px;
    top: 50%;
    right: 10px;
    margin-top: -8px;
    text-align: center;
  }
}

/*
 * Formatting of the .*-menu-item buttons ('chat' and 'give') in the .main-nav.
 */
body.html {
  .main-nav {
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;

    .full-wrapper {
                       // Place Give item at far right
      margin-left: 0;  // Move margin to .nav-logo-wrap
      margin-right: 0; // Move margin to .inner-nav .search-dropdown-list
    }

    .chat-menu-item,
    .give-menu-item {
      a {
        color: white;
      }
    }

    .chat-menu-item {
      // Mobile
        padding: 0 @main-nav-item-spacing; // Matches other menu items when mobile-on
      @media (min-width: @screen-lg-min) {
        padding: 0 @main-nav-item-spacing-wide;
      }

      background-color: @cardinal;
    }

    .give-menu-item {
      padding: 0 @main-nav-item-spacing-wide;
      background-color: @city-blue;
    }
  }
}

body.html.domain-christian .main-nav .chat-menu-item {
  background-color: @city-blue;
}

.hs-line-14,
.hs-line-11 {
  letter-spacing: 0.4em;
}

.mod-breadcrumbs {
  .crumb {
    opacity: 1;

    a {
      color: white !important;

      &:hover {
        text-decoration: underline;
      }
    }
  }
}

body.html {
  /*
   * Override the default OWL styling so the .owl-pagination doesn't
   * sit over the .local-scroll items.
   */
  @media only screen and (max-width: 480px) {
    .owl-pagination {
      bottom: @line-height-computed;
    }
  }

  @media only screen and (max-width: 768px) {
    .owl-pagination {
      bottom: @line-height-computed;
    }
  }

  @media only screen and (max-width: 1024px) {
    .owl-pagination {
      bottom: @line-height-computed;
    }
  }

  .owl-pagination {
    bottom: @line-height-computed;
  }

  .local-scroll {
    .scroll-down {
      width: 40px;
      height: 40px;
      margin-left: -20px;
      bottom: 0;
    }

    .scroll-down-icon {
      width: 40px;
      height: 40px;
      margin-left: -20px;
      color: white;
      font-size: 2*@line-height-computed;
      z-index: 5;
    }
  }
}

/*********
 * Alerts
 */

body.html {
  .alert {
    margin-bottom: 2*@line-height-computed;
    border-width: 0;
    padding: @line-height-computed @grid-gutter-half-width @line-height-computed 4*@grid-gutter-half-width;

    font-size: @font-size-base;
    text-transform: none;
    font-weight: 400;

    color: white;
    background-color: #1c9cd6;

    &.success {
      color: #0f2e38;
      background-color: #a3c7c7;
    }

    &.error {
      color: white;
      background-color: #cf2e4f;
    }

    i,
    svg.svg-inline--fa {
      float: left;
      font-size: 2*@font-size-base;
      margin: 0px @grid-gutter-half-width @line-height-computed -3*@grid-gutter-half-width;
    }

    p:last-child {
      margin-bottom: 0;
    }
  }
}

/*********
 * Colours
 */

.alt-features-icon {
  color: @midnight-blue;
}

// Lighten .bg-dark-alfa-70 and make testimonial visible on this background
.bg-dark-alfa-70 {
  &:before {
    background: rgba(51, 51, 51, 0.7);
  }

  .testimonial,
  .testimonial-author {
    color: white;
  }
}

/*************************
 * Format SVG images
 */
object[type="image/svg+xml"] {
  pointer-events: none;
}

/*************************************************************
 * Embedded videos are responsive and have a 16:9 aspect ratio
 */

div.video-filter {
  .embed-responsive;
  .embed-responsive-16by9;

  clear: both;
}

/****************************************
 * Styles accessible from the HTML editor
 */
body.html,
.cke_editable,
.cke_show_borders {
  // Emulate 'btn btn-medium btn-mod btn-round'
  .link-button {
    a {
      display: inline-block;
      box-sizing: border-box;
      border: 2px solid transparent;
      border-radius: 2px;
      padding: 8px 37px;
      color: white;
      background-color: rgba(34, 34, 34, 0.9);
      font-size: 12px;
      text-align: center;
      text-shadow: none;
      text-transform: uppercase;
      letter-spacing: 2px;
      line-height: 1.42857143;

      -webkit-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
      -moz-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
      -o-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
      -ms-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
      transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);

      &:hover {
        color: rgba(255, 255, 255, 0.85);
        background-color: rgba(0, 0, 0, 0.7);
        text-decoration: none;
      }
    }
  }

  /*
   * Rather than having an empty paragraph, format the previous paragraph with a
   * margin-bottom that is the same as if an empty paragraph was present. This is
   * a paragraph line-height plus 2 paragraph margin-bottoms (1 + 2 * 1 = 3).
   */
  .paragraph-plus-spacer {
    margin-bottom: (@line-height-computed * 3);
  }

  /*
   * Format paragraphs with left and right aligned images
   */
  .paragraph-image-left,
  .paragraph-image-right {
    clear: both;

    img {
      max-width: 50% !important;
      height: auto !important;
    }

    + p {
      clear: both;
    }
  }

  .paragraph-image-left {
    img {
      float: left !important;
      margin: 0 floor(@grid-gutter-width / 2) @line-height-computed 0 !important;
      padding: 0 floor(@grid-gutter-width / 2) 0 0 !important;
    }
  }

  .paragraph-image-right {
    img {
      float: right !important;
      margin: 0 0 @line-height-computed floor(@grid-gutter-width / 2) !important;
      padding: 0 0 0 floor(@grid-gutter-width / 2) !important;
    }
  }
}

/******************************
 * Format course-specific and blog-specific content
 */
.course-specific-content,
.blog-specific-content {
  .h3 {
    text-transform: uppercase;
  }

  .h3,
  .field,
  .paragraphs-items-field-course-options {
    margin-top: 0 !important;
    margin-bottom: 30px !important;
  }

  .embed-responsive-16by9 {
    background: @slate-40;
  }

  .paragraphs-items-field-course-options {
    .field {
      .make-row();

      margin-bottom: 0 !important;

      .field-item {
        .make-sm-column(12);
      }
      .field-item.short {
        .make-sm-column(6);
      }
    }
  }
}

.course-specific-content {
  .webform-client-form {
    margin-bottom: 4 * @line-height-computed;

    .webform-progressbar {
      display: none;
    }

    .form-actions {
      .make-xs-column(12);
      .make-480-column(12);
      .make-480-column-offset(0);
      .make-sm-column(12);
      .make-sm-column-offset(0);
      .make-md-column(12);
      .make-lg-column(12);
    }
  }
}

.page-node-done,
.node-course .content .webform-client-form {
  // The .webform-client-form is a .row

  .webform-progressbar {
    .make-md-column(8);
    .make-md-column-offset(2);

    margin-bottom: 4 * @line-height-computed;

    .webform-progressbar-outer {
      border: 0;
    }

    .webform-progressbar-inner {
      display: none;
    }

    .webform-progressbar-page {
      width: 1/3 * 100%;
      height: 2 * @line-height-computed;
      border: 0;
      border-radius: 0;
      margin: 0;
      font-weight: 400;

      /*
       * The pages on the form are ...
       *  - Start - display = none
       *  - My details
       *  - Payment
       *  - Complete
       */
      &:nth-of-type(1) { display: none; }
      &:nth-of-type(2) { left: 0% !important; }
      &:nth-of-type(3) { left: 1/3 * 100% !important; }
      &:nth-of-type(4) { left: 2/3 * 100% !important; }

      &.completed {
        background-color: @slate-20;
      }

      &.current {
        color: white;
        background-color: @cardinal;
      }
    }
  }

  .messages {
    .make-md-column(8);
    .make-md-column-offset(2);

    margin-bottom: 2 * @line-height-computed;
  }

  .webform-component-fieldset {
    margin-bottom: @line-height-computed;

    .form-control[disabled], .form-control[readonly], fieldset[disabled] .form-control {
      background-color: @slate-10;
    }

    input[placeholder="Price"] {
      font-weight: 500;
    }

    .single-option {
      display: none;
    }
  }

  .form-type-radio:not(:first-of-type) .required-span {
    display: none; // Avoid annoying repeats of red '*' - just leave the first
  }

  #wf-crm-billing-items {
    .make-xs-column(12);
    .make-480-column(10);
    .make-480-column-offset(1);
    .make-sm-column(8);
    .make-sm-column-offset(2);
    .make-md-column(6);
    .make-md-column-offset(3);

    display: block;
    margin-bottom: 2 * @line-height-computed;

    tbody, tr { display: block; }
    th, td { display: inline-block; width: 50%; }

    caption {
      display: none;
    }

    #wf-crm-billing-total {
      font-weight: 400;
    }
  }

  .crm-container.crm-public fieldset {
    .make-xs-column(12);
    .make-480-column(10);
    .make-480-column-offset(1);
    .make-sm-column(8);
    .make-sm-column-offset(2);
    .make-md-column(6);
    .make-md-column-offset(3);

    margin-bottom: @line-height-computed;

    legend {
      font-weight: 400;
    }

    .crm-section {
      .label { width: 33%; color: @slate; font-size: 14px; text-align: left; }
      .content { margin-left: 34%; font-size: 14px;}
      .description { font-size: 14px;}
      input[type="text"] { vertical-align: top; font-size: 14px; }
    }
  }

  .captcha {
    .make-xs-column(12);
    .make-sm-column(8);
    .make-sm-column-offset(2);
    .make-md-column(4);
    .make-md-column-offset(4);

    > div > div { // This div is 304x78 px
      margin: auto;
    }
  }

  .form-actions {
    .make-xs-column(12);
    .make-480-column(12);
    .make-480-column-offset(0);
    .make-sm-column(12);
    .make-sm-column-offset(0);
    .make-md-column(8);
    .make-md-column-offset(2);
    .make-lg-column(8);

    margin-top: 3 * @line-height-computed;

    .form-submit {
      width: 50%;
      border: 0 solid white;
    }

    .webform-previous {
      color: @slate;
      background-color: @slate-20;
      border-right-width: @grid-gutter-half-width;

      &:hover,
      &:focus {
        color: white;
        background-color: @slate-80;
      }
    }

    .webform-next,
    .webform-submit {
      border-left-width: @grid-gutter-half-width;
    }

    .btn + .btn {
      margin-left: 0;
    }

    .btn-mod.btn-medium {
      padding: 10px;
    }
  }
}

.domain-christian.page-node-done .webform-progressbar .webform-progressbar-page.current,
.domain-christian .node-course .content .webform-client-form .webform-progressbar .webform-progressbar-page.current {
  background-color: @city-blue;
}

.page-node-done .webform-confirmation,
.page-node-done .links {
  .make-xs-column(12);
  .make-480-column(12);
  .make-480-column-offset(0);
  .make-sm-column(12);
  .make-sm-column-offset(0);
  .make-md-column(8);
  .make-md-column-offset(2);
  .make-lg-column(8);

  margin-bottom: 4 * @line-height-computed;
}

/*********************************
 * Format paragraphs
 */
.paragraphs-item-with-speaker {
  display: inline;

   .content {
    display: inline;
    font-size: 0; // hide extra whitespace ...

    .field {
      display: inline;
      font-size: initial; // ... but show field
    }
  }
}

/*********************************
 * Format fields embedded in other fields
 */
.field {
  // Promotional insert
  .field.field-name-field-short-form {
    margin-top: 2*@line-height-computed;
    margin-bottom: 2*@line-height-computed;
  }
}

/*********************************
 * Format the .episode-content-tab
 */
.episode-content-tab {
  .make-row();

  .episode-pills {
    .make-md-column(5);
    .make-md-column-push(7);
    .make-lg-column(4);
    .make-lg-column-push(8);

    padding-top: 0;
    padding-bottom: 0;
    border-bottom-width: 1px;
  }

  .tab-content{
    .make-md-column(7);
    .make-md-column-pull(5);
    .make-lg-column-pull(4);

    display: block;
    position: relative;
    padding-top: 0;
    padding-bottom: 2*@line-height-computed;

    .overlaid-image {
      img{
        width: 100%;
      }

      &:after{
        content: " ";
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: rgba(255,255,255, .75);
        z-index: 1;
      }

      .embed-responsive-16by9 {
        background: @slate-40;
      }
    }

    .image-overlay {
      opacity: 1;
      width: 100%;
      position: absolute;
      top: 0;
      left: 0;
      padding: 0 @grid-gutter-half-width;
      font-size: @font-size-base;
      font-weight: 300;
      text-align: center;
      z-index: 2;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: cover;
    }

    .tab-pane {
      .field,
      .view-cbf2019-content-videos {
        text-align: left;
      }

      .field-name-field-order-url,
      .field-name-field-attachment,
      .field-name-field-content {
        padding: @line-height-computed @grid-gutter-width
      }
    }

    .field-name-field-order-url {
      font-size: 0; // Prevents extra space between .btn (inline-block)

      .btn {
        margin-right: @grid-gutter-half-width;
        margin-bottom: @line-height-computed;
      }
    }

    .field-name-field-video {
      /*
       * Prevent space between .video-filter-field (inline-block)
       * Ideally the font-size would be zero, but a .video-filter-field is 50%
       * of a width which might be an odd number. We need to force the odd-numbered
       * videos to wrap. We do this by using a non-zero font-size.
       */
      font-size: 0.5px;

      .video-filter-field {
        display: inline-block;
        width: 50%;

        &:only-child {
          width: 100%;
        }
      }
    }

    .view-cbf2019-content-videos {
      .views-field {
        margin: 0;
      }

      .pagination {
        width: 100%;
        margin: 10px 0 0;

        .pager li > a {
          border-radius: 2px;
          border: 2px solid @slate-60;

          // Mobile
            padding: 0 1px;
          @media (min-width: @screen-sm-min) {
            padding: 5px 14px;
          }
        }

        .pager li.pager-current > a {
          color: white;
          background-color: @slate;
          border-color: @slate;
        }
      }

      .pager-first,
      .pager-last {
        display: none;
      }
    }
  }

  .nav-pills {
    text-transform: uppercase;

    > li {
      > a {
        border-radius: 2px; // Emulate .btn-mod.btn-round
        line-height: 2*@font-size-base; // Make room for icon

        i,
        svg.svg-inline--fa {
          float: left;
          font-size: 2*@font-size-base;
        }
      }

      > a:hover,
      > a:focus {
        background-color: @slate-10;
      }
    }

    li.active {
      > a,
      > a:hover,
      > a:focus {
        color: white;
        background-color: @cardinal;
      }
    }

    @media (min-width: @screen-md-min) {
      border-bottom-width: 0px;

      > li {
        display: block;
        float: none;
        width: 100%;
      }

      > li + li {
        margin-left: 0;
      }
    }
  }

  .h3 {
    text-transform: uppercase;
  }

  .h3,
  ul,
  .field,
  .view-cbf2019-content-videos,
  .episode-tags {
    margin-top: 0 !important;
    margin-bottom: 30px !important;
  }

  .view-cbf2019-content-videos .pagination ul.pager {
    margin-bottom: 0 !important;
  }

  .image-overlay .field {
    @media (max-width: (@screen-md-min - 1)) {
      margin-bottom: 0 !important;
    }
  }

  .field-name-field-attachment,
  .field-name-field-content .jp-playlist {
    .field-item + .field-item,
    li {
      margin-top: @line-height-computed;
    }

    i,
    svg.svg-inline--fa {
      font-size: 42px;
      margin-right: 10px;
    }
  }

  @font-size-jplayer-button-large: floor(@font-size-base * 3);
  @font-size-jplayer-button-small: floor(@font-size-base * 1.5);
  @gray-jplayer-color:             @slate;
  @gray-jplayer-background:        @city-blue-20;

  div.jp-audio {
    width: auto;
    color: @gray-jplayer-color;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;

    div.jp-type-playlist {
      div.jp-interface {
        .make-row();

        height: 80px;
      }

      div.jp-playlist {
        .make-row();

        a.jp-playlist-current {
          color: @gray-jplayer-color;
        }

        a.jp-playlist-current:hover,
        a.jp-playlist-current:focus {
          color: @gray-jplayer-color;
          text-decoration: underline;
        }

        li {
          padding: 0;
          border-bottom: none;
        }

        li.jp-playlist-current {
          list-style-type: none;
          padding-left: 0;
        }

        li.jp-playlist-last {
          padding-left: 0;
        }
      }

      a.jp-play,
      a.jp-pause {
        .make-xs-column(3);
        .make-480-column(2);
        .make-sm-column(1);
        .make-lg-column(1);

        top: 0;
        left: auto;
      }

      div.jp-progress {
        .make-xs-column(9);
        .make-480-column(5);
        .make-480-column-pull(2);
        .make-sm-column(7);
        .make-sm-column-pull(1);
        .make-lg-column(8);
        .make-lg-column-pull(1);

        padding-left: 0;
        padding-right: 0;
        border-width: 0 @grid-gutter-half-width;
        border-style: solid;
        border-color: transparent;
        background: transparent;

        top: 27px;
        left: auto;
        height: 15px;
        position: relative;
        overflow: hidden;
      }

      div.jp-current-time,
      div.jp-duration {
        top: 0;
        font-style: oblique;
      }

      div.jp-current-time {
        .make-xs-column(5);
        .make-xs-column-push(3);
        .make-480-column(3);
        .make-480-column-push(2);
        .make-sm-column(4);
        .make-sm-column-push(1);
        clear: both;
      }

      div.jp-duration {
        .make-xs-column(4);
        .make-xs-column-push(3);
        .make-480-column(2);
        .make-480-column-push(2);
        .make-sm-column(3);
        .make-sm-column-push(1);
        .make-lg-column(4);
        .make-lg-column-push(1);
        text-align: right;
      }

      a.jp-mute,
      a.jp-unmute {
        .make-480-column(2);
        .make-480-column-push(5);
        .make-sm-column(1);
        .make-sm-column-push(7);
        .make-lg-column(1);
        .make-lg-column-push(8);

        top: 17px;
        height: auto;
      }

      div.jp-volume-bar {
        .make-480-column(2);
        .make-sm-column(2);
        .make-lg-column(1);

        margin-left: @grid-gutter-half-width;
        margin-right: @grid-gutter-half-width;
        padding-left: 0;
        padding-right: 0;

        top: 32px;
        left: auto;
        height: 5px;
        position: relative;
        overflow: hidden;
      }
    }
  }

  div.jp-interface {
    background-color: inherit;
    border: 0;
    position: relative;
    width: auto;

    ul.jp-controls {
      list-style-type: none;
      padding: 0;
      margin: 0;

      li {
        display: block;
      }

      a {
        color: @link-color;
        background-image: none;
        text-indent: 0;
        position: relative;
        overflow: inherit;
      }

      a:hover,
      a:focus {
        text-decoration: none;
      }
    }
  }

  div.jp-playlist {
    background-color: inherit;
    border-width: 0;
    width: auto;

    ul,
    div.jp-playlist-comment {
      .make-xs-column(12);

      font-size: 1em;
      list-style-type: none;
    }
  }

  div.jp-play-bar,
  div.jp-volume-bar-value {
    background: @gray-jplayer-color;
  }

  div.jp-seek-bar,
  div.jp-volume-bar {
    background: @gray-jplayer-background;
    cursor: pointer;
  }

  div.jp-seek-bar {
    height: 100%;
  }

  div.jp-volume-bar-value {
    height: 5px;
  }

  div.jp-current-time,
  div.jp-duration {
    font-size: 1em;
  }

  a.jp-next,
  a.jp-previous,
  a.jp-stop {
    display: none;
  }

  div.jp-playlist-comment {
    @media (max-width: (@screen-sm-min - 1)) {
      display: none !important;
    }
  }

  div.jp-volume-bar {
    @media (max-width: (@screen-xs-min - 1)) {
      display: none !important;
    }
  }

  a.jp-mute,
  a.jp-unmute {
    @media (max-width: (@screen-xs-min - 1)) {
      display: none !important;
    }
  }

  a.jp-play,
  a.jp-pause {
    font-size: @font-size-jplayer-button-large;
  }

  a.jp-mute,
  a.jp-unmute {
    font-size: @font-size-jplayer-button-small;
    text-align: right;
  }

  .episode-tags {
    .field {
      display: inline;
      font-style: italic;

      &:first-child::before {
        content: 'Tags:\00a0';
        white-space: pre;
      }

      &:not(first-child)::before {
        content: ',\00a0';
        white-space: pre;
      }
    }
  }
}

.domain-christian .episode-content-tab .nav-pills {
  li.active {
    > a,
    > a:hover,
    > a:focus {
      background-color: @city-blue;
    }
  }
}

/******************************
 * Format the contents of views
 */
.view-header {
  /*
   * Undo the Rhythm settings
   */
  margin-bottom: initial;
  float: none;

  .description {
    /*
     * A description inside a .view-header is formatted like normal text but
     * with larger text. These settings undo the effects of .primary-colour,
     * .uppercase, .font-alt and .h4.
     */
    color: @slate;
    text-transform: none;
    letter-spacing: initial;
    font-size: (@font-size-base + 2px); // Make the description larger than normal text
  }
}

.view-header-and-more {
 /*
  * Put a line-height margin under .view-header-and-more row
  */
  margin-bottom: @line-height-computed;
}

.view-filters {
  /*
   * Undo the Rhythm defaults for .view-filters
   */
  float: none;
  /* margin-top: 0; Overridden below.*/

  /*
   * Undo the margin-bottom of .view-header-and-more using a
   * margin-top and add another margin-bottom. 
   */
  margin-top: -2*@line-height-computed;
  margin-bottom: 2*@line-height-computed;

  /*
   * Undo the Rhythm defaults for .view-filters .views-exposed-form .views-exposed-widget
   */
  .views-exposed-form .views-exposed-widget {
    float: none;
    padding: 0;

    label {
      font-weight: 400;
    }

    /*
     * Remove the margin under .form-item and put it under .views-exposed-widget
     * to ensure all widgets have vertical space.
     */
    margin-bottom: 20px;
    .form-item {
      margin-bottom: 0 !important;
    }

    /*
     * If using Better Exposed Forms to format filters as links, then use the Bootstrap grid
     */
    .bef-select-as-links {
      .container;

      > .form-item {
        .make-row();

        @media (min-width: @screen-lg-min) {
          text-align: justify;

          &::after {
            content: ' ';
            width: 100%;
            display: inline-block;
          }
        }

        > .form-type-bef-link {
          .make-xs-column(6);
          .make-480-column(4);
          .make-sm-column(3);

          /*
           * Simulate a h5
           */
          text-align: center;
          font-size: @font-size-base;
          text-transform: uppercase;
          letter-spacing: 1px;
          margin-top: 10px;
          margin-bottom: 1.3em;
          line-height: 1.4;

          a {
            font-weight: 400;
            color: @link-color;

            &.active {
              text-decoration: underline;
            }
          }

          @media (min-width: @screen-lg-min) {
            display: inline-block;
            float: none;
            width: auto;
            padding-left: 0;
            padding-right: 0;

            &:first-child {
              padding-left: @grid-gutter-half-width;
            }

            &:last-child {
              padding-right: @grid-gutter-half-width;
            }
          }
        }
      }
    }

    .form-item-taxonomy-vocabulary-1-tid,
    .form-item-field-office-tid,
    .form-item-field-highlight-location-tid,
    .form-item-field-networks-visibility-tid {
      .bef-select-as-links > .form-item > .form-type-bef-link {
        /*
         * On large displays, centre the Ministry Centres and visibility
         * filters by 'prefixing' and 'suffixing' 2 columns to the grid
         */

        &:first-child {
          .make-lg-column-offset(2);
        }

        &:last-child {
          @media (min-width: @screen-lg-min) {
            margin-right: 100%*(2/12);
          }
        }
      }
    }

    .form-item-term-node-tid-depth,
    .form-item-field-topic-tid {
      .bef-select-as-links > .form-item > .form-type-bef-link {
        /*
         * On large displays, centre the Topic filters by 'prefixing' and
         * 'suffixing' a single column to the grid
         */

        &:first-child {
          .make-lg-column-offset(1);
        }

        &:last-child {
          @media (min-width: @screen-lg-min) {
            margin-right: 100%*(1/12);
          }
        }
      }
    }

    .form-item-field-office-tid {
      .bef-select-as-links > .form-item > .form-type-bef-link {
        &:first-child {
          /*
           * Don't display the All/Any option for the Office taxonomy
           */
          display: none;

          + .form-type-bef-link {
            /*
             * On large displays, centre the 8 Offices by adding 2 columns to the grid
             */
            .make-lg-column-offset(2);

            @media (min-width: @screen-lg-min) {
              padding-left: @grid-gutter-half-width; // Like ::first-child
            }
          }
        }
      }
    }

    .form-item-field-staff-groups-tid {
      .bef-select-as-links > .form-item > .form-type-bef-link {
        &:first-child {
          /*
           * As there is an even number of Staff Groups, plus All, make the
           * All option full-width on smaller displays (and reinstate the
           * large screen formatting for .form-type-bef-link)
           */
          .make-xs-column(12);
          .make-480-column(12);
          .make-sm-column(12);

          @media (min-width: @screen-lg-min) {
            float: none;
            width: auto;
          }
        }
      }
    }
  }

  .views-exposed-form .views-exposed-widget.views-widget-filter-field_resource_type_value {
    .bef-select-as-links {
      > .form-item {
        @media (min-width: @screen-md-min) {
          text-align: justify;

          &::after {
            content: ' ';
            width: 100%;
            display: inline-block;
          }
        }

        > .form-type-bef-link {
          .make-480-column(3);

          @media (min-width: @screen-md-min) {
            display: inline-block;
            float: none;
            width: auto;
            padding-left: 0;
            padding-right: 0;

            &:first-child {
              padding-left: @grid-gutter-half-width;
            }

            &:last-child {
              padding-right: @grid-gutter-half-width;
            }
          }

          &.form-item-edit-field-resource-type-value-all {
            /*
             * On larger displays, centre the Resource Types
             * by 'prefixing' 4 columns to the grid
             * (so 4 + 1 (All) + 3 (Types) + 4 = 12)
             */
            .make-md-column-offset(4);
          }

          &.form-item-edit-field-resource-type-value-3 {
            /*
             * On larger displays, centre the Resource Types
             * by 'suffixing' 4 columns to the grid
             * (so 4 + 1 (All) + 3 (Types) + 4 = 12)
             */
            @media (min-width: @screen-md-min) {
              &:last-child {
                margin-right: 100%*(4/12);
              }
            }
          }
        }
      }
    }
  }
}

.view .attachment {
  .make-row();

  .attachment-inner {
    .make-xs-column(10);
    .make-xs-column-offset(1);
    .make-lg-column(8);
    .make-lg-column-offset(2);

    margin-bottom: 2*@line-height-computed;
    text-align: center;
  }
}

.view-content {

  .views-field {
    /*
     * Generic field formatting
     */
    margin-bottom: @line-height-computed;

    &:last-child {
      margin-bottom: 2*@line-height-computed;
    }
  }

  .views-field-title,
  .views-field-field-title,
  .views-field-name,
  .views-field-field-details .tablefield th {
    /*
     * Generic title formatting
     */
    .font-alt();
    font-size: 24px;
    margin-bottom: 1.3em;
    line-height: 1.4;
  }

  .views-field-field-resource-type {
    /*
     * Format .views-field-field-resource-type as twice
     * the standard font size, hence no bottom margin,
     * and float right.
     */
    float: right;
    margin-top: -@line-height-half;
    margin-bottom: 0;
    font-size: 28px;
  }

  .views-field-field-logo {
    object {
      max-height: 4*@line-height-computed;
    }

    // Natural height of Smith Lecture logo which Janelle has chosen as the standard
    .image-overlay {
      object {
        // Mobile
          max-height: 1.5*@line-height-computed;
        @media (min-width: @screen-sm-min) {
          max-height: 2.5*@line-height-computed;
        }
        @media (min-width: @screen-md-min) {
          max-height: 1.5*@line-height-computed;
        }
      }
    }

    &.small-logo {
      margin-bottom: @line-height-computed;

      a {
        display: block;

        /*
         * Size the logo image
         */
        object[type="image/svg+xml"],
        img {
          max-height: 3*@line-height-computed;
        }
      }
    }
  }

  .owl-carousel {

    .views-field-field-in-activity,
    .views-field-city {
      /*
       * The In Activity and City fields are bold in an OWL Carousel
       */
      font-weight: 500;
    }

//    .owl-controls {
//      width: 100vw;
//      position: absolute;
//      left: calc(~"(100% - 100vw)/2");
//      top: 50%;
//    }

//    .owl-buttons {
//      position: relative;
//    }

    .owl-prev,
    .owl-next {
//      opacity: 1;

      &:before {
        /*
         * The Previous and Next buttons on the OWL carousel are a mid grey
         */
        background-color: @slate-60;
      }

      i,
      .svg-inline--fa {
        position: relative; // Reproduce Rhythm style for .owl-prev .fa and .owl-next .fa
      }
    }

//    .owl-prev {
//      left: 0;
//    }

//    .owl-right {
//      right: 0;
//    }

    .owl-pagination {
      bottom: @line-height-half;
    }

    .owl-page {
      span {
        background: white;
        border: 1px solid @slate;
      }

      &.active span {
        background: @slate;
        border: 1px solid white;
      }
    }

    .owl-item {
      .views-field-field-title-image,
      .views-field-field-highlight {
        /*
         * Apply the pattern for Bootstrap's .embed-responsive-16by9 class
         * to make the image in the proportion 653x368 which is the Rhythm
         * theme's large portfolio image format. Make the background of the
         * .field-content the same as .bg-gray.
         */
        position: relative;
        display: block;
        height: 0;
        padding: 0 0 56.36%;
        overflow: hidden;

        .field-content {
          position: absolute;
          width: 100%;
          height: 100%;
          top: 0;
          bottom: 0;
          left: 0;
          background-color: @slate-10;

          img {
            display: block;
            width: auto;
            height: 100%;
            margin: 0 auto;
          }
        }
      }
    }
  }
}

.views-bootstrap-grid-plugin-style,
.item-carousel-4-view,
.view-content .views-field-field-details {
  .views-field-title,
  .views-field-field-title,
  .tablefield th {
    /*
     * Reduce the size of titles in views which display multiple items
     */
    font-size: 16px;
  }
}

.bg-gray-view-content {
  .view-content {
    /*
     * .bg-gray-view-content applies .bg-gray to .view-content only
     * and adds vertical padding.
     *
     * .view-content .views-field:last-child has a bottom margin of
     * 2*@line-height-computed so we don't need as much bottom padding.
     */
    background-color: @slate-10;
    padding: 3*@line-height-computed 0 @line-height-computed;
  }
}

.container-view-content {
  .view-content {
    /*
     * .container-view-content makes enclosed .view-content
     * into a container. The container class is applied to
     * the DIV inside the .view-content so that the
     * .bg-gray-view-content styling is not .container-ed.
     */
    .views-bootstrap-grid-plugin-style {
      .container;
    }
  }
}

.more-link {
  a {
    /*
     * Format a ".more-link a" in the same way as a .section-more
     */
    margin-top: 7px;
    color: @link-color;
    font-size: 11px;
    font-weight: 400;
    letter-spacing: 0.4em;
    text-decoration: none;
    -webkit-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    -moz-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    -o-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    -ms-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
  }

  a::after {
    content: "\203A"; // &rsaquo;
  }
}

.h4 {
  .more-link a,
  .section-more {
    /*
     * Pad the top of a '.more-link a' and a '.section-more' by 7px
     * when inside a .h4. This aligns the bottom of the 'more' link
     * and the h4 next to it (18px h4 - 11px link = 7px)
     */
    padding-top: 7px;
  }
}

/*
 * An .office-view uses the grid system to lay out the phone, addresses
 * and email fields.
 */
.office-view {
  .view-content {
    .container;
  }

  .views-row {
    .make-row();

    .views-field {
      .make-xs-column(4);
      .make-md-column(2);

      word-break: break-word;
      min-height: 4*@line-height-computed; // Stabilise view after AJAX calls

      &.view-icon {
        .make-xs-column(2);
        .make-md-column(1);

        font-size: 42px;
        line-height: 1.3em;
        text-align: center;
        margin-bottom: 0;
        color: @cardinal;
      }

      .views-label {
        .font-alt();

        display: block;
      }

      &.views-field-email {
        .field-content {
          word-break: keep-all;
        }
      }
    }
  }

  .view-footer {
    clear: both;
  }
}

.domain-christian .office-view .views-row .views-field.view-icon {
  color: @city-blue;
}

.item-carousel-3-view {
  .owl-wrapper-outer {
    .make-row();
  }

  .owl-item {
    .make-xs-column(12);
    .make-480-column(6);
    .make-md-column(4);
  }
}

.view-cbf2019-national-activity-regular-venues {
  &.views-1-row {
    .item-carousel-3-view .owl-wrapper {
      @media (min-width: (@screen-xs-min + 1)) {
        left: (3/12)*100% !important;
      }
      @media (min-width: @screen-md-min) {
        left: (4/12)*100% !important;
      }
    }
  }

  &.views-2-rows {
    .item-carousel-3-view .owl-wrapper {
      @media (min-width: @screen-md-min) {
        left: (2/12)*100% !important;
      }
    }
  }
}

.item-carousel-4-view {
  .owl-wrapper-outer {
    .make-row();
  }

  .owl-item {
    .make-xs-column(12);
    .make-480-column(6);
    .make-sm-column(4);
    .make-lg-column(3);
  }
}

.map-canvas-view,
.map-canvas-view-multiple .view-content {
  /*
   * A .map-canvas-view is formatted in the same way as
   * Rhythm formats the #map-canvas element.
   * Ditto for .map-canvas-view-multiple
   */
  height: 410px;
  position: relative;
  background-color: @slate !important;
  z-index: 1;

  .marker-activity,
  .marker-title {
    font-weight: 400;
  }

  .marker-name,
  .marker-summary {
    font-style: italic;
  }

  .marker-separator + .marker-item,
  .marker-address + .marker-item {
    margin-top: 7px;
    border-top: 1px solid @slate-20;
    padding-top: 7px;

    &.marker-name,
    &.marker-address {
      border-top-color: transparent;
    }
  }
}

/*
 * Here is a pattern for creating a separator between views fields that
 * are rewritten and need a vertical separator between them. The first is
 * rewritten with a half separator after it, and the second with a half
 * separator before it. Two half-separators make a full separator.
 */
.field-rewrite-half-separator {
  display: inline;

  + .field-rewrite-half-separator::before {
    content: "|";
  }
}

/*
 * Here is a pattern for creating an image that is overlaid
 * with other content when hovered over or touched. This is
 * copied from Rhythm's .team-item.
 */
.views-field.image-plus-hover-overlay .field-content {
  display: block;
  position: relative;
  overflow: hidden;

  .overlaid-image {
    img{
      width: 100%;
    }

    &:after{
      content: " ";
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background: transparent;
      z-index: 1;

      -webkit-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
      -moz-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
      -o-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
      -ms-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
      transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    }
  }

  .image-overlay {
    opacity: 0;
    width: 100%;
    position: absolute;
    top: 50%;
    left: 0;
    padding: @line-height-computed @grid-gutter-half-width 2*@line-height-computed;
    font-size: @font-size-base;
    font-weight: 300;
    text-align: center;
    z-index: 2;

    -webkit-transform: translateY(-50%);
    -moz-transform: translateY(-50%);
    transform: translateY(-50%);
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;

    -webkit-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    -moz-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    -o-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    -ms-transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
    transition: all 0.27s cubic-bezier(0.000, 0.000, 0.580, 1.000);
  }
}

/*
 * When hovering over an element on a desktop ...
 */
.no-mobile {
  .image-plus-hover-overlay:hover {
    /*
     * When hovering over an image-plus-hover-overlay the overlaid-image:after
     * is made pale, and the image-overlay appears.
     */
    .overlaid-image:after {
      background: rgba(255,255,255, .93);
    }

    .image-overlay {
      opacity: 1;
    }
  }
}

/*
 * When touched on a mobile ...
 */
.image-plus-hover-overlay.js-active {
  /*
   * When an image-plus-hover-overlay is touched on a mobile
   * the overlaid-image:after is made pale, and the image-overlay appears.
   */
  .overlaid-image:after {
    background: rgba(255,255,255, .93);
  }

  .image-overlay {
    opacity: 1;
  }
}

/*
 * Here is a pattern for creating an image that is permanently
 * overlaid with other content.
 */
.views-field.image-plus-fixed-overlay .field-content {
  overflow: hidden;
}

.views-field.image-plus-fixed-overlay .field-content {
  display: block;
  position: relative;

  .overlaid-image {
    img{
      width: 100%;
    }

    &:after{
      content: " ";
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background: rgba(255,255,255, .75);
      z-index: 1;
    }
  }

  .image-overlay {
    opacity: 1;
    width: 100%;
    position: absolute;
    top: 50%;
    left: 0;
    padding: @line-height-computed @grid-gutter-half-width;
    font-size: @font-size-base;
    font-weight: 300;
    text-align: center;
    z-index: 2;
    pointer-events: none;

    -webkit-transform: translateY(-50%);
    -moz-transform: translateY(-50%);
    transform: translateY(-50%);
     -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
  }
}

.portrait-image-placeholder {
  position: relative;
  padding-bottom: 100%*438/360;
  background-color: @slate-10;
  text-align: center;

  i,
  .svg-inline--fa {
    position: absolute;
    top: 5%;
    max-width: 90%;
    left: (100%-90%)/2;
    color: @slate-60;
  }

  i {
    // Mobile
      font-size: 266px;
    @media (min-width: @screen-xs-min) {
      font-size: 432px;
    }
    @media (min-width: @screen-sm-min) {
      font-size: 340px;
    }
    @media (min-width: @screen-md-min) {
      font-size: 291px;
    }
    @media (min-width: @screen-lg-min) {
      font-size: 262px;
    }
  }

  .svg-inline--fa {
    // Mobile
      font-size: 280px;
    @media (min-width: @screen-xs-min) {
      font-size: 450px;
    }
    @media (min-width: @screen-sm-min) {
      font-size: 368px;
    }
    @media (min-width: @screen-md-min) {
      font-size: 310px;
    }
    @media (min-width: @screen-lg-min) {
      font-size: 280px;
    }
  }
}

.landscape-image-placeholder {
  position: relative;
  padding-bottom: 100%*368/653;
  background-color: @slate-10;
  text-align: center;

  i,
  .svg-inline--fa {
    position: absolute;
    top: 5%;
    max-width: 100%*(368/653)*(360/438);
    left: 100%*(1-(368/653)*(360/438))/2;
    color: @slate-60;
  }

  i {
    // Mobile
      font-size: 147px;
    @media (min-width: @screen-xs-min) {
      font-size: 227px;
    }
    @media (min-width: @screen-sm-min) {
      font-size: 365px;
    }
    @media (min-width: @screen-md-min) {
      font-size: 271px;
    }
    @media (min-width: @screen-lg-min) {
      font-size: 330px;
    }
  }

  .svg-inline--fa {
    // Mobile
      font-size: 151px;
    @media (min-width: @screen-xs-min) {
      font-size: 235px;
    }
    @media (min-width: @screen-sm-min) {
      font-size: 380px;
    }
    @media (min-width: @screen-md-min) {
      font-size: 286px;
    }
    @media (min-width: @screen-lg-min) {
      font-size: 344px;
    }
  }
}

.view.view-cbf2019-activity-component-list,
.view.venue,
.view.event-details {
  > .view-content {
    padding-bottom: 1.6em;

    > .views-row > .views-field,
    .owl-carousel .owl-item .views-field {
      .make-row();
      .clearfix();

      margin-left: 0;
      margin-right: 0;

      > .views-label {
        .make-xs-column(3);
        .make-480-column(4);
        .make-sm-column(3);

        padding-left: 0;
        border-top: 1px solid #888;
      }

      > .field-content {
        .make-xs-column(9);
        .make-480-column(8);
        .make-sm-column(9);

        padding-right: 0;
        border-top: 1px solid #888;
      }

      > .field-content:first-child {
        .make-xs-column(12);
        .make-480-column(12);
        .make-sm-column(12);
      }

      &.views-field-taxonomy-vocabulary-1 {
        > .views-label,
        > .field-content {
          border-top-width: 0px;
          padding-top: @line-height-half;
          padding-bottom: @line-height-half;
        }
      }

      &.views-field-field-national-date-text {
        .tz-city {
          float: left;
          clear: left;
        }

        .tz-time {
          text-align: right;
        }
      }
    }
  }

  .views-field {
    margin-bottom: 0;
    font-weight: 500;
    font-size: @font-size-base;
    text-transform: uppercase;
    letter-spacing: initial;
    line-height: inherit;

    &:last-child {
      margin-bottom: 0;
    }

    a {
      color: @slate;
      font-weight: 500;
    }

    p {
      margin: 0;
    }
  }

  .view.event-price {

    .views-row,
    .h3 {
      .make-row();
    }

    .views-field {
      .make-xs-column(7);
      .make-sm-column(8);
      .make-md-column(7);
      .make-lg-column(8);

      padding-right: 3px;

      &.views-field-amount {
        .make-xs-column(5);
        .make-sm-column(4);
        .make-md-column(5);
        .make-lg-column(4);

        padding-left: 3px;

        text-align: right;
      }
    }

    .h3 {
      margin-top: 0;
      margin-bottom: 0;
      font-size: @font-size-base;
      font-weight: 500 !important;
      line-height: @line-height-base;

      .Radio,
      .CheckBox,
      .Text {
        display: none;
      }

      .Select {
        .make-xs-column(12);

        padding-top: @line-height-computed;
      }

      &:first-child {
        .Select {
          padding-top: 0;
        }
      }
    }
  }
}

.view.venue {
  .views-row + .views-row {
    margin-top: @line-height-computed;
  }
}

.view.view-cbf2019-activity-component-list {
  > .view-content {
    > .views-row:last-child > .views-field {
      > .field-content:last-child {
        border-bottom: 1px solid #888;
      }
    }
  }
}

.view.view-cbf2019-activity-logo {
  > .view-content {
    > .views-row > {
      .views-field.views-field-field-subtitle + .views-field.views-field-view {
        margin-top: -1*@line-height-computed;
      }
    }
  }
}

.view.view-cbf2019-staff-slider {
  .owl-prev,
  .owl-next {
    // Mobile
      top: 50%; // The buttons are hidden on mobile so this doesn't really matter
    @media (min-width: @screen-xs-min) {
      top: 35%;
    }
    @media (min-width: @screen-sm-min) {
      top: 128px;
    }
    @media (min-width: @screen-md-min) {
      top: 172px;
    }
    @media (min-width: @screen-lg-min) {
      top: 155px;
    }
  }
}

.view.view-cbf2019-event-registration {
  .views-row {
    .make-row();

    .views-field {
      .make-480-column(6);
      .make-480-column-offset(6);
      .make-md-column(4);
      .make-md-column-offset(8);
    }
  }
}

.view.view-cbf2019-blog,
.view.view-cbf2019-recent-library {
  .view-filters .views-exposed-form {
    .views-exposed-widgets {
      .make-row();

      .views-exposed-widget {
        .make-xs-column(12);
        .make-480-column(6);
        .make-sm-column(4);
        .make-md-column(3);
        .make-lg-column(2);

        &.views-widget-filter-field_topic_tid,
        &.views-widget-filter-term_node_tid_depth,
        &.views-widget-filter-title {
          .make-480-column(12);
          .make-sm-column(12);
          .make-md-column(12);
          .make-lg-column(12);
        }

        &.views-submit-button {

          input {
            // Set top margin to height of LABEL element other widgets have
            margin-top: @line-height-computed + 5px;
            width: 100%;
          }
        }
      }
    }
  }
}

.view.view-cbf2019-recent-library {
  .view-filters .views-exposed-form {
    .views-exposed-widgets {
      .views-exposed-widget {
        &.views-widget-filter-keys {
          .make-480-column(12);
          .make-sm-column(6);
          .make-md-column(6);
          .make-lg-column(5);
          .make-lg-column-offset(1);
        }

        &.views-widget-filter-field_resource_type_value,
        &.views-submit-button {
          .make-sm-column(3);
        }

        &.views-submit-button {
          .make-lg-column(2);
        }
      }
    }
  }
}

.view.view-cbf2019-blog {
  .view-filters .views-exposed-form {
    .views-exposed-widgets {
      .views-exposed-widget {
        &.views-widget-filter-keys {
          .make-sm-column(8);
          .make-md-column(8);
          .make-lg-column(6);
          .make-lg-column-offset(2);
        }

        &.views-submit-button {
          .make-sm-column(4);
          .make-md-column(4);
          .make-lg-column(2);
        }
      }
    }
  }
}

.view.view-cbf2019-key-dates {
  .view-content {
    .key-dates-month {
      text-align: center;
      font-size: 16px;
      font-weight: 400;
      text-transform: uppercase;
      margin-bottom: @line-height-computed;
    }

    .views-row:last-child {
      margin-bottom: 2*@line-height-computed;
    }

    .views-field {
      margin-bottom: 0;
    }

    .views-field-field-sort-order {
      .make-xs-column(3);

      text-align: right;
    }

    .views-field-title {
      .make-xs-column(9);

      font-size: @font-size-base;
      line-height: @line-height-base;
      font-weight: 300;
      text-transform: none;
      letter-spacing: inherit;
    }
  }
}

/*
 * Set up the pager to switch the previous/next buttons.
 * The .pager-current is hidden for aesthetic reasons.
 */

.view {
  &.view-cbf2019-courses,
  &.view-cbf2019-third-space-content,   // This view has no pagers yet, but may do soon
  &.view-cbf2019-third-space-category,
  &.view-cbf2019-search,
  &.view-cbf2019-blog,
  &.view-cbf2019-recent-library {
    .item-list {
      .container();

      .pager {
        .make-row();

        font-size: 16px;
        text-transform: uppercase;
        letter-spacing: 0.2em;

        .pager-previous {
          .make-xs-column(4);

          text-align: left;
        }

        .pager-current {
          .make-xs-column(4);

          visibility: hidden;
        }

        .pager-next {
          .make-xs-column(4);

          text-align: right;
        }
      }
    }
  }
}

.view-cbf2019-domain {
  .view-content {
    .views-field:last-child {
      margin-bottom: 0;
    }

    .footer-logo {
      margin: 0px auto;
      max-width: 200px;
    }
  }
}

.view-cbf2019-national-activity-contents {
  > .view-content {
    > .views-row {
      > .views-field {
        margin-bottom: 0;

        .view {
          .view-content {
            margin-bottom: 1.6em;
          }
        }
      }
    }
  }
}

.view-cbf2019-third-space-categories.view-display-id-block_1 {
  .view-content {
    display: block;
    position: relative;
    overflow: hidden;
    margin: 2*@line-height-computed auto;

    // Mobile:
      max-width: 200px;
    @media (min-width: @screen-sm-min) {
      max-width: 560px;
    }
    @media (min-width: @screen-md-min) {
      max-width: 760px;
    }
    @media (min-width: @screen-lg-min) {
      max-width: 960px;
    }

    &:after {
     .embed-responsive;
     .embed-responsive-16by9;

      content: " ";
      display: block;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      z-index: 1;
      background-size: cover;
      opacity: 0.64;

      // Mobile:
        background-image: url('/sites/all/themes/cbf2019/images/thirdspace/floorplan-portrait.jpg');
        padding-bottom: 100%*(1200/558); // Dimensions of portrait floorplan
      @media (min-width: @screen-sm-min) {
        background-image: url('/sites/all/themes/cbf2019/images/thirdspace/floorplan-landscape.jpg');
        padding-bottom: 100%*(558/1200); // Dimensions of landscape floorplan
      }
    }

    .views-field-tid {
      margin: 0;

      a {
        position: absolute;
        z-index: 2;
        color: white;
        background-color: @cardinal;

        // Mobile:
          padding: 4px;
          font-size: 25px;
          line-height: 34px;
        @media (min-width: @screen-md-min) {
          padding: 8px;
          font-size: 30px;
          line-height: 39px;
        }
        @media (min-width: @screen-lg-min) {
          padding: 10px;
          font-size: 32px;
          line-height: 41px;
        }

        &.third-space-category-1540 { // Entertainment
          // Mobile:
            right: 65%;
            top: 50%;
          @media (min-width: @screen-sm-min) {
            right: auto;
            top: 65%;
            left: 50%;
          }
        }

        &.third-space-category-1541 { // Bible and prayer
          // Mobile:
            right: 17%;
            top: 40%;
          @media (min-width: @screen-sm-min) {
            right: auto;
            top: 17%;
            left: 40%;
          }
        }

        &.third-space-category-1543 { // Study
          // Mobile:
            right: 75%;
            top: 11%;
          @media (min-width: @screen-sm-min) {
            right: auto;
            top: 75%;
            left: 11%;
          }
        }

        &.third-space-category-1544 { // Environment
          // Mobile:
            right: 17%;
            top: 82%;
          @media (min-width: @screen-sm-min) {
            right: auto;
            top: 17%;
            left: 82%;
          }
        }

        &.third-space-category-1545 { // Sport
          // Mobile:
            right: 17%;
            top: 4%;
          @media (min-width: @screen-sm-min) {
            right: auto;
            top: 17%;
            left: 4%;
          }
        }

        &.third-space-category-1546 { // Politics and culture
          // Mobile:
            right: 17%;
            top: 60%;
          @media (min-width: @screen-sm-min) {
            right: auto;
            top: 17%;
            left: 60%;
          }
        }

        &.third-space-category-1547 { // Relationships
          // Mobile:
            right: 65%;
            top: 82%;
          @media (min-width: @screen-sm-min) {
            right: auto;
            top: 65%;
            left: 82%;
          }
        }

        &.third-space-category-1542,
        &.third-space-category-1548 { // Health and wellbeing
          // Mobile:
            right: 75%;
            top: 28%;
          @media (min-width: @screen-sm-min) {
            right: auto;
            top: 75%;
            left: 28%;
          }
        }

        &.third-space-category-1565 { // Food
          // Mobile:
            right: 17%;
            top: 22%;
          @media (min-width: @screen-sm-min) {
            right: auto;
            top: 17%;
            left: 22%;
          }
        }
      }
    }
  }
}

.view-cbf2019-third-space-categories.view-display-id-block_2 {
  .view-content {

    a {
      color: white;
    }

    .views-field-tid {
      margin-bottom: 16px;
      text-transform: uppercase;

      .third-space-category-icon {
        text-align: right;

        i {
          background-color: @cardinal;

          width: 60px;
          height: 60px;
          font-size: 32px;
          line-height: 60px;
        }
      }

      .third-space-category-subtitle {
        font-size: 20px;
      }

      .third-space-category-name {
        font-size: 14px;
      }
    }
  }
}

.view-cbf2019-search,
.view-cbf2019-third-space-content,
.view-cbf2019-third-space-category {
  .view-content {
    .views-field {
      &:last-child {
        margin-bottom: @grid-gutter-width;
      }

      &.image-plus-fixed-overlay {
        .field-content {
          .overlaid-image::after {
            background: rgba(0, 0, 0, .5);
          }

          .image-overlay {
            color: white;

            .views-field-field-resource-type {
              float: none;
              margin-top: 0;
            }

            .views-field:last-child {
              margin-bottom: 0;
            }
          }
        }
      }
    }
  }
}

.view-cbf2019-with {
  .view-content {
    .views-field-field-title { // The speaker's role
      font-size: initial;
    }
  }
}

.view-cbf2019-activity-components {
  > .view-content > .views-row > .view > .view-content:last-child {
    margin-bottom: 3*@line-height-computed;
  }

  > .view-content > .views-row > .view > .item-list:last-child {
    margin-bottom: 4*@line-height-computed; // Extra spacing for .pager
  }

  > .view-content > .views-row:last-child > .view > .view-content:last-child,
  > .view-content > .views-row:last-child > .view > .item-list:last-child {
    margin-bottom: 0;
  }
}

.view-cbf2019-article-topics {
  .view-content {
    .views-field {
      margin-bottom: 0;
    }

    margin-bottom: 2*@line-height-computed;
  }
}

.view-cbf2019-speaker-listings {
  .view-content {
    .views-field {
      margin-bottom: 0;
      font-size: @font-size-base;
    }

    margin-bottom: 2*@line-height-computed;
  }
}

/******************
 * Block formatting
 */
.block {
  margin-bottom: 3*@line-height-computed; // Vertical spacing between blocks

  &.with-bottom-border {
    padding-bottom: 2*@line-height-computed;
    border-bottom: 1px solid @slate-60;
    margin-bottom: 3*@line-height-computed;
  }

  &.border-sandwich-above + &.border-sandwich-below {
    margin-top: -3*@line-height-computed;
    border-top: 1px solid @slate-60;
    padding-top: 3*@line-height-computed;
  }

  &.without-bottom-margin {
    margin-bottom: 0;
  }

  &.small-gap-to-previous-block {
    margin-top: -3*@line-height-computed;
  }

  &.small-gap-to-next-block {
    margin-bottom: 2*@line-height-computed;
  }

  .office-view {
    .google-map {
      margin-top: 3*@line-height-computed; // Put spacing back in above map
    }
  }
}

.front {
  .block.block-system {
    display: none; // Hide the System block on the home page
  }
}

.block {
  .footer-social-links {
    /* Enlarge the .footer-social-links */
    font-size: 21px;

    a {
      width: 30px;
      height: 30px;
      line-height: 30px !important;
    }

    a:before {
      top: -1;
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      -ms-transform: rotate(0deg);
      transform: rotate(0deg);
      border: 1px solid @slate;
    }
  }
}

/*
 * Other domains need the search block visible on all pages.
 * This theme only requires it on /search/node/*.
 * So use CSS to control the display rather than block settings.
 */
                  .block.block-search { display: none;  }
.page-search-node .block.block-search { display: block; }


/******************************
 * Format various content types
 */
.node-type-activity,
.page-civicrm-event- {
  .region-content {
    .make-row();

    .block-views {
      .make-xs-column(12);
    }

    .block-views:first-child {
      .make-480-column(6);
      .make-md-column(4);
    }

    .block-system {
      .make-xs-column(12);

      column-count: 1;
      column-gap: @grid-gutter-width;

      @media (min-width: @screen-sm-min) {
        column-count: 2;
      }

      @media (min-width: @screen-md-min) {
        column-count: 3;
      }
    }

    .block-views + .block-system {
      .make-480-column(6);
      .make-md-column(8);

      @media (min-width: @screen-sm-min) {
        column-count: 1;
      }

      @media (min-width: @screen-md-min) {
        column-count: 2;
      }
    }

    .block-views:first-child + .block-views {
      .make-480-column(6);
      .make-md-column(4);
      .make-md-column-push(4);
    }

    .block-views + .block-views + .block-system {
      .make-480-column(12);
      .make-md-column(4);
      .make-md-column-pull(4);

      @media (min-width: @screen-sm-min) {
        column-count: 2;
      }

      @media (min-width: @screen-md-min) {
        column-count: 1;
      }
    }

    .block-system {
      .field + .field {
        margin-top: 2em; // Format the space between the fields to be like that between P elements
      }
    }
  }
}

.page-civicrm-event- {
  .region-content {
    .block-system {
      .entity-property + .field,
      .field + .entity-property,
      .entity-property + .entity-property {
        margin-top: 2em; // Format the space between entity-property's to be like that between P elements
      }
    }
  }
}

.node-type-episode {
  .content {
    border-top: 1px solid @slate-60;
    padding-top: 2*@line-height-computed;

    .field + .field {
      margin-top: 2em; // Format the space between the fields to be like that between P elements
    }
  }
}

.node-type-blog {
  .blog-specific-content {
    margin-bottom: @line-height-computed;
  }

  .content {
    .field-name-field-video {
      // Mobile:
        float: none;
        width: 100%;
        padding: 0;
        margin: 0 0 @line-height-computed 0;
      @media (min-width: @screen-sm-min) {
        float: right;
        width: (6/12)*100%;
        padding: 0 0 0 @grid-gutter-half-width;
        margin: 0 0 @line-height-computed @grid-gutter-half-width;
      }
      @media (min-width: @screen-md-min) {
        width: (7/12)*100%;
      }
    }

    .field-name-body {
      // Force images in blogs to have consistent sizing
      img {
        // Mobile:
          float: none !important;
          width: 100% !important;
          height: auto !important;
          padding: 0 !important;
          margin: 0 0 @line-height-computed 0 !important;
        @media (min-width: @screen-sm-min) {
          float: right !important;
          width: auto !important;
          max-width: (6/12)*100%;
          padding: 0 0 0 @grid-gutter-half-width !important;
          margin: 0 0 @line-height-computed @grid-gutter-half-width !important;
        }
        @media (min-width: @screen-md-min) {
          max-width: (7/12)*100%;
        }
      }

      // Undo the blog IMG sizing inside Promotional Inserts
      .field-name-field-short-form {
        img {
          // Mobile:
            // No change to mobile formatting
          @media (min-width: @screen-sm-min) {
            float: none !important;
            width: 100% !important;
            max-width: 100%;
            padding: 0 !important;
            margin: 0 0 @line-height-computed 0 !important;
          }
          @media (min-width: @screen-md-min) {
            max-width: 100%;
          }
        }
      }

      div.video-filter {
        // Mobile:
          width: 100%;
          margin: 0 0 @line-height-computed 0;
        @media (min-width: @screen-sm-min) {
          float: right;
          width: (6/12)*100%;
          padding-bottom: (9/16)*(6/12)*100%;
          margin: 0 0 @line-height-computed @grid-gutter-half-width;
        }
        @media (min-width: @screen-md-min) {
          width: (7/12)*100%;
          padding-bottom: (9/16)*(7/12)*100%;
        }

        iframe.video-filter {
          @media (min-width: @screen-sm-min) {
            margin-left: @grid-gutter-half-width;
          }
        }
      }
    }
  }
}

.node {
  .content {
    + div h4.blog-page-title {
      margin-top: 2*@line-height-computed; // Add space before comments
    }
  }
}

/*******************************
 * Format field_details in views
 */
.views-field-field-details {
  .tablefield {
    width: initial;
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: initial;

    caption {
      // Emulate .view-header-and-more containing only a .view-header
      .h4;
      .font-alt(300);

      padding: 0 0 2em 0; // P element
      margin-bottom: @line-height-computed; // .view-header-and-more
      text-align: center;
      font-size: 18px;
      color: @cardinal;
    }

    tr {
      margin-left: @grid-gutter-half-width; // Simulate a Bootstrap row
      margin-right: @grid-gutter-half-width;
    }

    th {
      padding-bottom: 1.3em; // .views-field-title margin not effective so pad instead
    }

    th, td {
      border-top: 0;
      padding: 0 @grid-gutter-half-width; // Simulate a Bootstrap column
      line-height: inherit;

      p:last-child {
        margin-bottom: 0;
      }
    }
  }
}

.domain-christian .views-field-field-details .tablefield caption {
  color: @city-blue;
}

/*****************************
 * Format the content of forms
 */

.form .form-item {
  input[type="text"],
  input[type="email"],
  input[type="number"],
  input[type="url"],
  input[type="search"],
  input[type="tel"],
  input[type="password"],
  input[type="date"],
  input[type="color"],
  select,
  textarea,
  label,
  ul.token-input-list {
    text-transform: none !important; // Override the uppercase setting
    color: @slate;
    line-height: @line-height-computed;
  }

  ul.token-input-list {
    border-radius: 2px;
    border-color: rgba(0, 0, 0, 0.1);
    background-image: none;

    &:hover {
      border-color: rgba(0, 0, 0, 0.2);
    }

    li.token-input-token,
    li.token-input-input-token input {
      background-color: @sea-foam-60;
      font-weight: 400;
      letter-spacing: 1px;
    }
  }
}

body.html div.token-input-dropdown ul li.token-input-selected-dropdown-item {
  background-color: @sea-foam-60;
}


.webform-client-form {
  // Contact Us form
  .make-row();

  fieldset {
    .make-xs-column(12);
    .make-480-column(8);
    .make-sm-column(5);
    .make-lg-column(4);

    .webform-component-select {
      .make-row();

      label {
        .make-xs-column(5);
      }

      > .form-group {
        .make-xs-column(7);
      }
    }
  }

  .fieldset-description {
    margin-bottom: @line-height-computed;
  }

  fieldset:nth-child(odd) {
    .make-480-column-offset(2);
    .make-sm-column-offset(1);
    .make-lg-column-offset(2);

    clear: both;
  }

  fieldset:nth-child(even) {
    .make-480-column-offset(2);
    .make-sm-column-offset(0);
  }

  .form-actions {
    .make-xs-column(12);
    .make-480-column(8);
    .make-480-column-offset(2);
    .make-sm-column(5);
    .make-sm-column-offset(6);
    .make-lg-column(4);

    input {
      width: 100%;
    }
  }

  .webform-component-select {
    margin-bottom: 0 !important;

    label {
      margin-right: auto;
      margin-bottom: 20px;
      height: 37px;
      font-size: 12px;
      border-left: @grid-gutter-half-width solid transparent;
      padding-top: 8px;
      letter-spacing: 1px;
      font-weight: 400;
    }

    > .form-group {
      margin-bottom: 20px;
    }
  }

  .form-item {
    position: relative;

    .form-textarea {
      height: 199px;
    }

    .form-required {
      display: none;
    }

    .required-span {
      position: absolute;
      right: 15px;
      top: 6px;
    }

    &.webform-component-select {
      .required-span {
        right: 30px;
      }
    }
  }
}

.webform-client-form-2972 {
  fieldset:nth-child(3) {
    .make-sm-column-offset(6); // Important this is before the following rule
  }

  fieldset:nth-child(odd) {
    .make-lg-column-offset(0); // Important this is after the previous rule
  }

  .form-actions {
    .make-lg-column-offset(8);
  }

  fieldset .form-item ul.token-input-list,
  legend {
    border: 0;
    border-bottom: 1px solid @slate-20;
    max-width: auto;
    color: @slate;
    font-size: 16px;
    font-weight: 400;
    text-transform: uppercase;

    li.token-input-token {
      margin: 0;
      padding: 0;
      color: @slate;
      background-color: white;
      font-weight: 400;
    }
  }

  .form-control[readonly] {
    cursor: default;
    background-color: white;
    border-color: transparent;
    font-size: @font-size-base !important;

    -moz-user-select: all;
    -webkit-user-select: all;
    -ms-user-select: all;
    user-select: all;
  }

  .form-control[readonly][value=""] {
    display: none;
  }

  .form-control[readonly]:not([value]) {
    display: none;
  }
}

.page-node-3759 .node-webform > .content,
.page-node-3768 .node-webform > .content {
  .make-row();

  .webform-client-form {
    // Support us form
    .make-xs-column(12);
    .make-480-column(8);
    .make-480-column-offset(2);
    .make-sm-column(12);
    .make-sm-column-offset(0);
    .make-md-column(8);
    .make-md-column-offset(2);

    .form-item {
      position: relative;

      .form-required {
        display: none;
      }

      .required-span {
        position: absolute;
        right: 2*@grid-gutter-half-width;
        top: 6px;
      }

      &.webform-component-select {
        .required-span {
          right: 3*@grid-gutter-half-width;
        }
      }
    }

    fieldset .form-item {
      .required-span {
        right: @grid-gutter-half-width;
      }

      &.webform-component-select {
        .required-span {
          right: 2*@grid-gutter-half-width;
        }
      }
    }

    > div {
      .make-row();

      > .webform-progressbar {
        .make-xs-column(10);
        .make-xs-column-offset(1);
        .make-sm-column(4);

        @media (min-width: @screen-sm-min) {
          margin-right: percentage(6/12);
        }
      }
      > .webform-component-radios,
      > .webform-component-number,
      > .webform-component-textfield,
      > .webform-component-fieldset {
        .make-xs-column(12);
        .make-sm-column(6);

        @media (min-width: @screen-sm-min) {
          margin-right: percentage(6/12);
        }
      }

      > .webform-component-select {
        label {
          .make-xs-column(6);
          .make-sm-column(3);
        }

        > .form-group {
          .make-xs-column(6);
          .make-sm-column(3);

          @media (min-width: @screen-sm-min) {
            margin-right: percentage(6/12);
          }
        }
      }

      >.webform-component-markup {
        .make-xs-column(12);
        .make-sm-column(6);
        .make-sm-column-offset(6);

        @media (min-width: @screen-sm-min) {
          position: absolute;
        }
      }

      > .form-actions {
        .make-xs-column(12);
        .make-sm-column(6);
      }
    }

    .webform-component-select {
      margin-bottom: 0 !important;

      label {
        margin-right: auto;
        margin-bottom: 20px;
        height: 37px;
        font-size: 12px;
        border-left: @grid-gutter-half-width solid transparent;
        padding-top: 8px;
        letter-spacing: 1px;
        font-weight: 400;
      }

      > .form-group {
        margin-bottom: 20px;
      }
    }
  }
}

/********************
 * CiviCRM formatting
 */
.block-system {
  #crm-container.crm-container {
    .make-row();

    #crm-main-content-wrapper,
    #civicrm-footer {
      .make-xs-column(12);
      .make-480-column(10);
      .make-480-column-offset(1);
      .make-md-column(8);
      .make-md-column-offset(2);
      .make-lg-column(6);
      .make-lg-column-offset(3);
    }

    .crm-block {
      .make-row();

      fieldset > legend,
      .header-dark,
      .crm-profile-view-title,
      .progress-outer,
      .crm-section > p,
      .action-link,
      .event_summary-section {
        .make-xs-column(12);
      }

      .help,
      .messages,
      .alert {
        /*
         * Can't use padding because this element has a border.
         * Simulate .col-xs-12 with a margin rather than padding, and clear
         * rather than float so side borders align with other content.
         */
        clear: both;
        margin-left: @grid-gutter-half-width;
        margin-right: @grid-gutter-half-width;
      }

      .crm-section {
        &.help,
        &.messages,
        &.alert {
          > p {
            /*
             * Avoid doubling the column padding.
             */
            padding-left: 0;
            padding-right: 0;
          }
        }
      }

      .crm-group > table {
        margin-left: @grid-gutter-half-width;
        margin-right: @grid-gutter-half-width;
      }

      .label {
        .make-xs-column(4);
      }

      .content,
      .helprow-post,
      .display-block {
        .make-xs-column-offset(0);
        .make-xs-column(8);
      }

      .content:first-child,
      .clear + .content,
      .credit_card_type-section .content,
      .helprow-post,
      .display-block {
        .make-xs-column-offset(4);
      }

      .event_info-group .display-block,
      .helprow-post .content {
        .make-xs-column-offset(0);
        .make-xs-column(12);
      }

      .crm-section > a.button {
        .make-xs-column(6);
        .make-sm-column(4);
      }
    }

    .crm-submit-buttons,
    .crm-actionlinks-top,
    .crm-actionlinks-bottom {

      .crm-button,
      .action-link {
        .make-xs-column(6);
        .make-sm-column(4);
      }

      /*
       * Some CiviCRM forms put the next button before the back/cancel button.
       * These 2 rules switch them to make the interface consistent.
       */
      .crm-button-type-next:nth-child(1):nth-last-child(2) {
        .make-xs-column-push(6);
        .make-sm-column-push(4);
      }

      .crm-button-type-cancel:nth-child(2):nth-last-child(1),
      .crm-button-type-back:nth-child(2):nth-last-child(1) {
        .make-xs-column-pull(6);
        .make-sm-column-pull(4);
      }
    }

    .crm-submit-buttons > a.button.cancel[href="/"] {
      display: none;  // Hide silly Cancel buttons that redirect to the home page
    }
  }
}

.block-system {
  #crm-container.crm-container {
    #crm-main-content-wrapper {
      line-height: @line-height-computed !important;

      .crm-form-block {
        padding: 0;
        margin-bottom: 0;
        font-size: inherit;
        background-color: white;
        color: inherit;
      }

      .crm-section {
        margin-bottom: @line-height-computed !important; // Override 0

        .crm-section {
          &:last-child {
            margin-bottom: 0 !important; // Restore 0 if nesting crm-section DIVs ...
          }

          &.section-pricesetTotal {
            margin-bottom: 2*@line-height-computed !important; // ... except for Price Set Totals
          }
        }

        .label,
        .content,
        .required,
        select {
          color: @slate;
        }

        .label,
        .content {
          padding-top: 0 !important; // Override 6px top and bottom
          padding-bottom: 0;
          line-height: @line-height-computed !important;
          font-size: @font-size-base !important;
        }

        .label {
          min-height: 1.8em;
          margin: 0;
          font-weight: 400; // Override 'bold'
          white-space: normal; // Override 'nowrap'

          label {
            vertical-align: middle;
            margin-bottom: 0;
          }
        }

        .content {
          label {
            font-weight: 300; // Prevent label elements in .content being made 'bold' (400)
          }

          .crm-frozen-field,
          &.calc-value {
            min-height: 1.8em;
            display: block;
          }
        }

        input {
          margin-top: -6px;  // 6px = 1px border + 5px padding in .content
        }

        input#installments {
          margin-top: 0;  // 6px = 1px border + 5px padding in .content
        }

        input:only-child {
          // Mobile
            width: 93%;
          @media (min-width: @screen-xs-min) {
            width: 96%;
          }
          @media (min-width: @screen-sm-min) {
            width: 97%;
          }
        }

        textarea:only-child {
          width: 100%;
        }

        input[type="radio"],
        input[type="checkbox"] {
          line-height: @line-height-computed;
        }

        input[type="text"],
        input[type="password"],
        input[type="email"],
        select,
        .select2-choice,
        .select2-arrow {
          border-radius: 2px;
          border-color: rgba(0, 0, 0, 0.1);
          background-image: none;
          font-size: @font-size-base !important;

          &:hover {
            border-color: rgba(0, 0, 0, 0.2);
          }
        }

        label + input.crm-form-radio,
        label + input.crm-form-checkbox {
          margin-left: 7px;
        }

        .select2-choice > .select2-chosen {
          font-size: @font-size-base !important;
        }

        .select2-arrow {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
          border-left-width: 0;
          background-color: white;
        }

        > a.button {
          margin: 0;
          background: transparent;
          border-width: 0;

          span {
            display: inline-block;
            box-sizing: border-box;
            width: 100%;
            border: 2px solid transparent;
            border-radius: 2px;
            padding-top: 8px;
            padding-bottom: 8px;
            color: white;
            background-color: rgba(34, 34, 34, 0.9);
            font-size: 12px;
            text-align: center;
            text-shadow: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            line-height: 1.42857143;

            -webkit-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
            -moz-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
            -o-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
            -ms-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
            transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);

            &:hover {
              color: rgba(255, 255, 255, 0.85);
              background-color: rgba(0, 0, 0, 0.7);
              text-decoration: none;
            }
          }
        }
      }

      .crm-section.event_summary-section {
        font-weight: 400;
      }

      .crm-section.crm-socialnetwork {
        display: inline-block;
      }

      .crm-section.helprow-post {
        margin-top: 5px - @line-height-computed; // 5px space below previous .crm-section

        .content {
          margin-bottom: @line-height-computed;
        }
      }

      .crm-profile-view-title {
        text-transform: uppercase;
        margin-bottom: @line-height-computed;
      }

      .iCal_links-section {
        display: none;
      }

      .display-block {
        margin-top: @line-height-computed;
        margin-bottom: 2*@line-height-computed;
      }

      fieldset > legend,
      .header-dark {
        margin-top: -5px; // So .header-dark border obscures fieldset border
        margin-bottom: @line-height-computed;
        padding-top: 0;
        padding-bottom: 0;
        border-top: 1px solid @slate-40;
        background-color: white;
        font-weight: 400;
        color: @slate;
        letter-spacing: 2px;
        text-transform: uppercase;
      }

      .description {
        font-size: @font-size-base;
        font-weight: 300;
      }

      .bold {
        font-weight: 400;
      }

      .right {
        float: none !important; // CiviCRM's .right is different to Bootstrap's
      }

      .help,
      .messages,
      .alert {
        margin-bottom: @line-height-computed;
        border: 1px solid rgba(0, 0, 0, 0.1);
        font-size: @font-size-base;
      }

      .help {
        background-color: @sea-foam-40;
        color: @slate;

        p,
        > div {
          margin: 5px;

          p {
            margin: 0;
          }
        }
      }

      .alert i {    // Undo body.html .alert i in this case
        float: initial;
        font-size: initial;
        margin: 0;
      }

      table {
        font-size: @font-size-base;

        tr.columnheader {
          background-color: @slate-10;
          color: @slate;
          border-width: 0;
        }

        th {
          background-color: transparent;
          border-width: 0px;
          color: @slate;
          font-size: @font-size-base;
          font-weight: 400;
          padding: 4px;
        }
      }

      .status {
        background-color: @city-blue-10;
        color: @slate;
      }

      .crm-error {
        background-color: @cardinal-10;
        color: @cardinal;
      }

      .error {
        color: @cardinal;
      }

      fieldset {
        clear: both;
        border-top-width: 0;

        &.crm-group,
        &.crm-profile,
        &.billing_mode-group {
          margin-top: 0;
          margin-bottom: @line-height-computed;
        }

        legend {
          font-family: 'Rubik', arial, sans-serif !important; // Override CiviCRM fonts
        }
      }

      a,
      a:link {
        color: @link-color;

        &.btn-mod {
          color: white;
        }
      }

      .link-button {
        a,
        a:link {
          color: white;
        }
      }

      .crm-submit-buttons,
      .crm-actionlinks-top,
      .crm-actionlinks-bottom {
        width: auto !important;

        .crm-button,
        .action-link {
          margin: 0;
          background: transparent;
          border-width: 0;
        }
      }

      .crm-submit-buttons,
      .crm-actionlinks-bottom .action-link {
        margin-top: 2*@line-height-computed;
      }

      .crm-submit-buttons,
      .crm-actionlinks-top .action-link,
      .crm-actionlinks-bottom .action-link {
        margin-bottom: 2*@line-height-computed;
      }

      .crm-submit-buttons,
      .crm-actionlinks-top,
      .crm-actionlinks-bottom {
        .crm-button,
        .action-link {
          i {
            display: none;
          }

          input,
          a.button {
            display: inline-block;
            box-sizing: border-box;
            width: 100%;
            margin: 0;
            border: 2px solid transparent;
            border-radius: 2px;
            padding-top: 8px;
            padding-bottom: 8px;
            padding-left: initial;
            padding-right: initial;
            color: white;
            background-color: rgba(34, 34, 34, 0.9);
            background-image: none;
            font-size: 12px;
            text-align: center;
            text-shadow: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            line-height: 1.42857143;

            -webkit-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
            -moz-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
            -o-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
            -ms-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
            transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);

            &:hover {
              color: rgba(255, 255, 255, 0.85);
              background-color: rgba(0, 0, 0, 0.7);
            }
          }

          &.crm-button-type-back input {
            color: #151515;
            background-color: transparent;
            border-color: rgb(21, 21, 21);

            &:hover {
              color: white;
              background-color: black;
            }
          }
        }

        button.crm-button {
          i {
            display: initial;
          }

          display: inline-block;
          box-sizing: border-box;
          margin: 0;
          border: 2px solid white;
          border-left-width: @grid-gutter-half-width;
          border-right-width: @grid-gutter-half-width;
          border-radius: 2px;
          padding-top: 8px;
          padding-bottom: 8px;
          padding-left: initial;
          padding-right: initial;
          color: white;
          background-color: rgba(34, 34, 34, 0.9);
          background-image: none;
          font-size: 12px;
          text-align: center;
          text-shadow: none;
          text-transform: uppercase;
          letter-spacing: 2px;
          line-height: 1.42857143;

          -webkit-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
          -moz-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
          -o-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
          -ms-transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);
          transition: all 0.2s cubic-bezier(0.000,0.000,0.580,1.000);

          &:hover {
            color: rgba(255, 255, 255, 0.85);
            background-color: rgba(0, 0, 0, 0.7);
          }
        }
      }
    }

    .progress.payment {
      height: auto;
      margin-bottom: 2*@line-height-computed;
      border: 1px solid @slate-40;
      border-radius: 2px;
      box-shadow: none;

      .progress-bar {
        width: 100%/3;
        padding: @line-height-half 0;
        border: 0px;
        box-shadow: none;
        font-size: 12px;
        font-weight: 300;
        letter-spacing: 2px;
        text-transform: uppercase;
      }

      .past {
        color: @slate-80;
        background: @slate-20;
        letter-spacing: initial;
      }

      .present {
        color: white;
        background: @cardinal;
        font-weight: 400;
      }

      .future {
        color: @midnight-blue;
        background: white;
      }

      .progress-bar.future + .progress-bar.future {
        border-left: 1px solid @slate-40;
      }
    }

    #civicrm-footer {
      border-width: 0;
    }
  }

  #crm-container.crm-container.crm-public {
    .price-set-row {
      .crm-price-amount-label {
        color: @slate;
        font-weight: 500;
      }

      .crm-price-amount-amount {
        color: @slate;
        font-weight: 400;
      }
    }

    span.crm-hover-button,
    a.crm-hover-button {
      // The enclosing #crm-main-content-wrapper is position: relative;
      position: absolute;
    }
  }
}

.domain-christian .block-system #crm-container.crm-container .progress.payment .present {
  background: @city-blue;
}

body.html {
  .crm-container {
    .select2-drop {
      border-color:  @slate-40;
    }

    .select2-drop-active {
      border-color:  @city-blue;
    }

    .select2-results {
      color: @slate;

      .select2-highlighted {
        color: white;
        background: @city-blue;
        font-weight: 500;
      }
    }
  }
}


/*********************************
 * Fix anomalies which might occur
 */
.container {
  .container,
  .container-view-content .view-content .views-bootstrap-grid-plugin-style,
  .office-view .view-content,
  .view-filters .views-exposed-form .views-exposed-widget .bef-select-as-links,
  .view.view-cbf2019-courses .item-list,
  .view.view-cbf2019-third-space-content .item-list,
  .view.view-cbf2019-third-space-category .item-list,
  .view.view-cbf2019-search .item-list,
  .view.view-cbf2019-blog .item-list,
  .view.view-cbf2019-recent-library .item-list {
    /*
     * Bootstrap containers are not designed to be nested
     */
    width: auto;
    padding-right: initial;
    padding-left: initial;
  }
}
